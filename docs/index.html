<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="WuXuxian TTRPG Alpha Test - Cultivate Your Path to Immortality">
    <meta name="theme-color" content="#1e3a5f">
    <title>WuXuxian TTRPG - Alpha Test</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="main-container">
        <!-- Main Hero Section -->
        <div class="container">
            <h1>üéÆ WuXuxian TTRPG</h1>
            <div class="subtitle">Cultivate Your Path to Immortality</div>
            
            <!-- Status Badge -->
            <div class="status-badge" id="statusBadge">
                <span class="status-dot" id="statusDot"></span>
                <span id="statusText">Checking Status...</span>
            </div>
            
            <!-- Error Message -->
            <div class="error-message" id="errorMessage">
                <span id="errorMessageText"></span>
            </div>
            
            <!-- Main Control Buttons -->
            <div class="buttons">
                <button class="btn btn-primary" id="btnStart" disabled>
                    <span class="spinner" id="spinnerStart"></span>
                    ‚ö° Start Server
                </button>
                
                <button class="btn btn-danger" id="btnStop" disabled>
                    <span class="spinner" id="spinnerStop"></span>
                    üõë Stop Server
                </button>
            </div>
            
            <!-- Enter Game Button (Prominent) -->
            <div class="buttons">
                <button class="btn btn-enter locked" id="btnEnter" disabled>
                    üîí Enter Game (Server Required)
                </button>
            </div>
            
            <!-- Quick Instructions -->
            <div class="instructions">
                <h3>üöÄ Quick Start</h3>
                <ol>
                    <li>Clone the repository: <code id="cloneCommand">git clone https://github.com/hvrryh-web/idk</code></li>
                    <li>Start the services: <code>./start-alpha.sh</code></li>
                    <li>Wait for services to start (PostgreSQL, Backend, Frontend)</li>
                    <li>Click <strong>"Check Server Health"</strong> below to verify</li>
                    <li>Once ready, click <strong>"Enter Game"</strong> to start playing!</li>
                </ol>
            </div>
            
            <!-- Feature List -->
            <div class="features">
                <div class="feature">
                    <div class="feature-title">‚úÖ Multi-Page Visual Novel UI</div>
                    Navigate through character sheets, wiki, SRD book, and more
                </div>
                <div class="feature">
                    <div class="feature-title">‚úÖ Character Management System</div>
                    Create and manage characters with cultivation paths, soul cores, and domain sources
                </div>
                <div class="feature">
                    <div class="feature-title">‚úÖ Combat Simulation Engine</div>
                    Monte Carlo combat simulations with 1-beat and 3-stage combat modes
                </div>
                <div class="feature">
                    <div class="feature-title">‚úÖ Knowledge Wiki & SRD</div>
                    Searchable wiki with full System Reference Document
                </div>
            </div>
        </div>
        
        <!-- Diagnostics Panel -->
        <div class="panel" id="diagnosticsPanel">
            <h2>üîß Service Status</h2>
            <p style="color: var(--text-secondary); margin-bottom: var(--spacing-md);">
                Real-time status of services required for the alpha test.
            </p>
            
            <div class="buttons" style="margin-bottom: var(--spacing-md);">
                <button class="btn btn-small btn-secondary" id="btnCheckHealth">
                    üîÑ Check Server Health
                </button>
                <button class="btn btn-small btn-warning" id="btnReportIssue">
                    üêõ Report Issue
                </button>
            </div>
            
            <div class="diagnostics-grid" id="diagnosticsGrid">
                <div class="diagnostic-card checking" id="diagnostic-backend">
                    <div class="diagnostic-card-header">
                        <span class="status-dot pulse"></span>
                        Backend API
                    </div>
                    <div class="diagnostic-card-status">Checking...</div>
                    <div class="diagnostic-card-details">http://localhost:8000</div>
                </div>
                
                <div class="diagnostic-card checking" id="diagnostic-frontend">
                    <div class="diagnostic-card-header">
                        <span class="status-dot pulse"></span>
                        Game Frontend
                    </div>
                    <div class="diagnostic-card-status">Checking...</div>
                    <div class="diagnostic-card-details">http://localhost:5173</div>
                </div>
            </div>
            
            <!-- Console Panel -->
            <h3 style="margin-top: var(--spacing-lg);">üìù Status Log</h3>
            <div class="console-panel" id="consolePanel">
                <div class="console-line info">
                    <span class="console-timestamp">[--:--:--]</span>
                    Waiting for initialization...
                </div>
            </div>
        </div>
        
        <!-- GitHub Integration Panel -->
        <div class="panel">
            <h2>üêô GitHub Resources</h2>
            <p style="color: var(--text-secondary); margin-bottom: var(--spacing-md);">
                Quick access to repository resources and documentation.
            </p>
            
            <div class="links-grid" id="githubLinksGrid">
                <a href="#" class="link-card" target="_blank" rel="noopener noreferrer" data-link="repo">
                    <span class="link-card-icon">üìñ</span>
                    <div class="link-card-text">
                        <div class="link-card-title">Repository</div>
                        <div class="link-card-desc">Source code & README</div>
                    </div>
                </a>
                
                <a href="#" class="link-card" target="_blank" rel="noopener noreferrer" data-link="issues">
                    <span class="link-card-icon">üêõ</span>
                    <div class="link-card-text">
                        <div class="link-card-title">Issues</div>
                        <div class="link-card-desc">Bug reports & tracking</div>
                    </div>
                </a>
                
                <a href="#" class="link-card" target="_blank" rel="noopener noreferrer" data-link="actions">
                    <span class="link-card-icon">‚öôÔ∏è</span>
                    <div class="link-card-text">
                        <div class="link-card-title">Actions</div>
                        <div class="link-card-desc">CI/CD & builds</div>
                    </div>
                </a>
                
                <a href="#" class="link-card" target="_blank" rel="noopener noreferrer" data-link="wiki">
                    <span class="link-card-icon">üìö</span>
                    <div class="link-card-text">
                        <div class="link-card-title">Wiki</div>
                        <div class="link-card-desc">Documentation & guides</div>
                    </div>
                </a>
                
                <a href="#" class="link-card" target="_blank" rel="noopener noreferrer" data-link="releases">
                    <span class="link-card-icon">üè∑Ô∏è</span>
                    <div class="link-card-text">
                        <div class="link-card-title">Releases</div>
                        <div class="link-card-desc">Downloads & changelog</div>
                    </div>
                </a>
                
                <a href="#" class="link-card" target="_blank" rel="noopener noreferrer" data-link="pulls">
                    <span class="link-card-icon">üîÄ</span>
                    <div class="link-card-text">
                        <div class="link-card-title">Pull Requests</div>
                        <div class="link-card-desc">Contributions & reviews</div>
                    </div>
                </a>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="container">
            <div class="footer">
                <p>Built with FastAPI + SQLAlchemy + React + TypeScript + PostgreSQL</p>
                <p>&copy; 2024 WuXuxian TTRPG Project</p>
                <p style="margin-top: var(--spacing-sm);">
                    <a href="game.html">Game Page</a> |
                    <a href="#" id="footerAlphaTestLink" target="_blank">Alpha Test Guide</a> |
                    <a href="#" id="footerArchitectureLink" target="_blank">Architecture</a>
                </p>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="app.js"></script>
    <script>
        // Set GitHub URLs from config
        document.addEventListener('DOMContentLoaded', function() {
            const linkMap = {
                'repo': CONFIG.GITHUB_REPO_URL,
                'issues': CONFIG.GITHUB_ISSUES_URL,
                'actions': CONFIG.GITHUB_ACTIONS_URL,
                'wiki': CONFIG.GITHUB_REPO_URL + '/wiki',
                'releases': CONFIG.GITHUB_REPO_URL + '/releases',
                'pulls': CONFIG.GITHUB_REPO_URL + '/pulls'
            };
            
            // Update GitHub links
            document.querySelectorAll('[data-link]').forEach(function(link) {
                const linkType = link.getAttribute('data-link');
                if (linkMap[linkType]) {
                    link.href = linkMap[linkType];
                }
            });
            
            // Update clone command
            const cloneCmd = document.getElementById('cloneCommand');
            if (cloneCmd) {
                cloneCmd.textContent = 'git clone ' + CONFIG.GITHUB_REPO_URL;
            }
            
            // Update footer links
            const alphaLink = document.getElementById('footerAlphaTestLink');
            if (alphaLink) {
                alphaLink.href = CONFIG.GITHUB_REPO_URL + '/blob/main/ALPHA_TEST.md';
            }
            
            const archLink = document.getElementById('footerArchitectureLink');
            if (archLink) {
                archLink.href = CONFIG.GITHUB_REPO_URL + '/blob/main/ARCHITECTURE.md';
            }
        });
    </script>
</body>
</html>
