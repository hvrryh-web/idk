{
  "version": "1.0.0",
  "description": "Character Poses Sheet Generator - 3x3 grid of character poses for WuXuxian TTRPG",
  "workflow_notes": "Generates 9 distinct pose variations in a grid layout for combat and roleplay visualization",
  
  "output_config": {
    "grid_layout": "3x3",
    "output_size": {"width": 2048, "height": 2048},
    "cell_size": {"width": 682, "height": 682},
    "poses_count": 9
  },
  
  "poses": [
    {
      "id": "idle",
      "name": "Idle Stance",
      "position": [0, 0],
      "prompt_addition": "standing relaxed, neutral pose, calm expression, hands at sides, wuxia character at rest"
    },
    {
      "id": "combat_violence",
      "name": "Combat Ready (Violence Pillar)",
      "position": [1, 0],
      "prompt_addition": "aggressive combat stance, martial arts pose, fierce expression, weapon drawn, violence pillar active, red qi aura"
    },
    {
      "id": "casting_revelation",
      "name": "Casting/Channeling (Revelation Pillar)",
      "position": [2, 0],
      "prompt_addition": "mystical casting pose, hands channeling energy, concentrated expression, revelation pillar active, green mystical glow"
    },
    {
      "id": "commanding_influence",
      "name": "Social/Commanding (Influence Pillar)",
      "position": [0, 1],
      "prompt_addition": "commanding pose, authoritative stance, noble bearing, influence pillar active, blue ethereal presence"
    },
    {
      "id": "injured",
      "name": "Injured State (Wounded)",
      "position": [1, 1],
      "prompt_addition": "injured pose, holding wound, pained expression, blood stains, torn clothing, wounded but standing"
    },
    {
      "id": "maimed",
      "name": "Maimed State (Critical)",
      "position": [2, 1],
      "prompt_addition": "severely injured, kneeling, heavy damage, near defeat, critical condition, desperate expression"
    },
    {
      "id": "victory",
      "name": "Victory Pose",
      "position": [0, 2],
      "prompt_addition": "triumphant pose, victorious expression, confident stance, sword raised, cultivator victory"
    },
    {
      "id": "dead",
      "name": "Dead/Defeated",
      "position": [1, 2],
      "prompt_addition": "fallen pose, lying defeated, eyes closed, peaceful death, cultivator fallen in battle"
    },
    {
      "id": "back_view",
      "name": "Back View (Outfit Detail)",
      "position": [2, 2],
      "prompt_addition": "from behind, back view, showing outfit details, hair detail, cape/robe back, character back"
    }
  ],
  
  "individual_pose_workflow": {
    "description": "Workflow for generating each individual pose",
    "nodes": {
      "1": {
        "class_type": "CheckpointLoaderSimple",
        "inputs": {
          "ckpt_name": "{{checkpoint_name}}"
        }
      },
      "2": {
        "class_type": "CLIPTextEncode",
        "inputs": {
          "text": "{{base_prompt}}, {{pose_prompt}}, single character, full body, white background, wuxia manhwa style, cultivation aesthetic",
          "clip": ["1", 1]
        }
      },
      "3": {
        "class_type": "CLIPTextEncode",
        "inputs": {
          "text": "{{negative_prompt}}, multiple characters, cropped, partial body, busy background",
          "clip": ["1", 1]
        }
      },
      "4": {
        "class_type": "EmptyLatentImage",
        "inputs": {
          "width": 512,
          "height": 768,
          "batch_size": 1
        }
      },
      "5": {
        "class_type": "KSampler",
        "inputs": {
          "seed": "{{seed}}",
          "steps": 28,
          "cfg": 7.5,
          "sampler_name": "dpmpp_2m",
          "scheduler": "karras",
          "denoise": 1.0,
          "model": ["1", 0],
          "positive": ["2", 0],
          "negative": ["3", 0],
          "latent_image": ["4", 0]
        }
      },
      "6": {
        "class_type": "VAEDecode",
        "inputs": {
          "samples": ["5", 0],
          "vae": ["1", 2]
        }
      },
      "7": {
        "class_type": "SaveImage",
        "inputs": {
          "filename_prefix": "{{output_prefix}}_pose_{{pose_id}}",
          "images": ["6", 0]
        }
      }
    }
  },
  
  "grid_composition_workflow": {
    "description": "Composite all 9 poses into a 3x3 grid",
    "nodes": {
      "load_1": {
        "class_type": "LoadImage",
        "inputs": {"image": "{{pose_idle}}"}
      },
      "load_2": {
        "class_type": "LoadImage",
        "inputs": {"image": "{{pose_combat_violence}}"}
      },
      "load_3": {
        "class_type": "LoadImage",
        "inputs": {"image": "{{pose_casting_revelation}}"}
      },
      "load_4": {
        "class_type": "LoadImage",
        "inputs": {"image": "{{pose_commanding_influence}}"}
      },
      "load_5": {
        "class_type": "LoadImage",
        "inputs": {"image": "{{pose_injured}}"}
      },
      "load_6": {
        "class_type": "LoadImage",
        "inputs": {"image": "{{pose_maimed}}"}
      },
      "load_7": {
        "class_type": "LoadImage",
        "inputs": {"image": "{{pose_victory}}"}
      },
      "load_8": {
        "class_type": "LoadImage",
        "inputs": {"image": "{{pose_dead}}"}
      },
      "load_9": {
        "class_type": "LoadImage",
        "inputs": {"image": "{{pose_back_view}}"}
      },
      "resize_1": {
        "class_type": "ImageScale",
        "inputs": {
          "image": ["load_1", 0],
          "width": 682,
          "height": 682,
          "upscale_method": "lanczos",
          "crop": "center"
        }
      },
      "resize_2": {
        "class_type": "ImageScale",
        "inputs": {
          "image": ["load_2", 0],
          "width": 682,
          "height": 682,
          "upscale_method": "lanczos",
          "crop": "center"
        }
      },
      "resize_3": {
        "class_type": "ImageScale",
        "inputs": {
          "image": ["load_3", 0],
          "width": 682,
          "height": 682,
          "upscale_method": "lanczos",
          "crop": "center"
        }
      },
      "resize_4": {
        "class_type": "ImageScale",
        "inputs": {
          "image": ["load_4", 0],
          "width": 682,
          "height": 682,
          "upscale_method": "lanczos",
          "crop": "center"
        }
      },
      "resize_5": {
        "class_type": "ImageScale",
        "inputs": {
          "image": ["load_5", 0],
          "width": 682,
          "height": 682,
          "upscale_method": "lanczos",
          "crop": "center"
        }
      },
      "resize_6": {
        "class_type": "ImageScale",
        "inputs": {
          "image": ["load_6", 0],
          "width": 682,
          "height": 682,
          "upscale_method": "lanczos",
          "crop": "center"
        }
      },
      "resize_7": {
        "class_type": "ImageScale",
        "inputs": {
          "image": ["load_7", 0],
          "width": 682,
          "height": 682,
          "upscale_method": "lanczos",
          "crop": "center"
        }
      },
      "resize_8": {
        "class_type": "ImageScale",
        "inputs": {
          "image": ["load_8", 0],
          "width": 682,
          "height": 682,
          "upscale_method": "lanczos",
          "crop": "center"
        }
      },
      "resize_9": {
        "class_type": "ImageScale",
        "inputs": {
          "image": ["load_9", 0],
          "width": 682,
          "height": 682,
          "upscale_method": "lanczos",
          "crop": "center"
        }
      },
      "row1": {
        "class_type": "ImageBatch",
        "_comment": "Combine row 1 images",
        "inputs": {
          "image1": ["resize_1", 0],
          "image2": ["resize_2", 0]
        }
      },
      "row1_complete": {
        "class_type": "ImageBatch",
        "inputs": {
          "image1": ["row1", 0],
          "image2": ["resize_3", 0]
        }
      },
      "row2": {
        "class_type": "ImageBatch",
        "inputs": {
          "image1": ["resize_4", 0],
          "image2": ["resize_5", 0]
        }
      },
      "row2_complete": {
        "class_type": "ImageBatch",
        "inputs": {
          "image1": ["row2", 0],
          "image2": ["resize_6", 0]
        }
      },
      "row3": {
        "class_type": "ImageBatch",
        "inputs": {
          "image1": ["resize_7", 0],
          "image2": ["resize_8", 0]
        }
      },
      "row3_complete": {
        "class_type": "ImageBatch",
        "inputs": {
          "image1": ["row3", 0],
          "image2": ["resize_9", 0]
        }
      },
      "grid_compose": {
        "class_type": "ImageComposite",
        "_comment": "Final 3x3 grid composition",
        "inputs": {
          "images": [
            ["row1_complete", 0],
            ["row2_complete", 0],
            ["row3_complete", 0]
          ],
          "direction": "vertical"
        }
      },
      "save_grid": {
        "class_type": "SaveImage",
        "inputs": {
          "filename_prefix": "{{output_prefix}}_poses_sheet",
          "images": ["grid_compose", 0]
        }
      }
    }
  },
  
  "template_variables": {
    "checkpoint_name": "Model checkpoint filename",
    "base_prompt": "Base character description",
    "pose_prompt": "Specific pose description (from poses array)",
    "negative_prompt": "Negative prompt for generation",
    "seed": "Base seed (each pose uses seed + pose_index for variation)",
    "output_prefix": "Prefix for output filenames",
    "pose_id": "Pose identifier (idle, combat_violence, etc.)",
    "pose_idle": "Path to generated idle pose image",
    "pose_combat_violence": "Path to generated combat pose image",
    "pose_casting_revelation": "Path to generated casting pose image",
    "pose_commanding_influence": "Path to generated commanding pose image",
    "pose_injured": "Path to generated injured pose image",
    "pose_maimed": "Path to generated maimed pose image",
    "pose_victory": "Path to generated victory pose image",
    "pose_dead": "Path to generated dead pose image",
    "pose_back_view": "Path to generated back view image"
  }
}
